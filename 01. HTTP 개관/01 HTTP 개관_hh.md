# 1장 HTTP 개관

### HTTP

- HTTP는 신뢰성 있는 데이터 전송 프로토콜을 사용하기 때문에, 데이터가 지구 반대편에서 오더라도 전송 중 손상되거나 꼬이지 않음을 보장함.
- 신뢰성 있는 전송은 인터넷 애플리케이션 개발자에게도 이로운데, HTTP 통신이 전송 중 파괴, 중복, 왜곡되는 것을 걱정하지 않아도 되기 때문임.

### 웹 클라이언트와 서버

- 클라이언트는 서버에게 HTTP 요청을 보내고 서버는 요청된 데이터를 HTTP 응답으로 돌려줌.
- HTTP 클라이언트와 HTTP 서버는 WWW(World Wide Web)의 기본 요소임.
- ex) https://www.naver.com/index.html  접속 → 웹브라우저는 HTTP 요청을 https://www.naver.com 서버로 보냄 → 서버는 요청받은 객체(/index.html)를 찾음 → 성공했다면 그것의 타입, 길이 등의 정보와 함께 HTTP 응답에 실어서 클라이언트에 전달

### 리소스

- 웹 콘텐츠의 원천. ex) 웹 서버 파일 시스템의 파일(텍스트, HTML, Word, 이미지 파일 등)
- 미디어 타입
    - MIME(Multipurpose Internet Mail Extensions, 다목적 인터넷 메일 확장) : 원래 각기 다른 전자메일 시스템 사이에서 메시지가 오갈 때 겪는 문제점을 해결하기 위해 설계된 것.
    - 웹브라우저는 서버로부터 객체를 돌려받을 때, 다룰 수 있는 객체인지 MIME 타입을 통해 확인함.
    - 사선(/)으로 구분된 주 타입(primary object type)과 부 타입(specific subtype)으로 이루어진 문자열 라벨임.
    - ex) text/html, text/plain, image/jpeg, image/gif, video/quicktime
- URI
    - 네트워크 상에서 자원 위치를 알려주기 위한 규약.
    - URL (Uniform Resource Locator) : 통합 자원 지시자로 인터넷에 있는 자원을 나타내는 유일한 주소.
        - 리소스가 정확히 어디에 있고 어떻게 접근할 수 있는지 분명히 알려줌.

        <**스킴**>://<**호스트명**>/<**경로명**>

        - 스킴(scheme) : 리소스에 접근하기 위해 사용되는 프로토콜.
        - 호스트명 : 서버의 인터넷 주소.
        - 경로명 : 웹 서버의 리소스 ex) /images/logo.png
    - URN (Uniform Resource Name) : 콘텐츠를 이루는 한 리소스에 대해, 그 리소스의 위치에 영향 받지 않는 유일무이한 이름 역할.

### 트랜잭션

- HTTP 트랜잭션은 요청 명령과 응답 결과로 구성됨.
- HTTP 메서드 : 모든 HTTP 요청 메시지는 한 개의 메서드를 가짐.

    |상태 코드 값|의미|
    |-----|----------------------|
    |GET|서버에서 클라이언트로 지정한 리소스를 보내라|
    |PUT}|클라이언트에서 서버로 보낸 데이터를 지정한 이름의 리소스로 저장하라|
    |DELETE|지정한 리소스를 서버에서 삭제하라|
    |POST|클라이언트 데이터를 서버 게이트웨이 애플리케이션으로 보내라|
    |HEAD|지정한 리소스에 대한 응답에서 HTTP 헤더 부분만 보내라|

- 상태코드 : 모든 HTTP 응답 메시지는 상태 코드와 함께 반환됨.
    - 상태코드는 클라이언트에게 요청이 성공했는지 아니면 추가 조치가 필요한지 알려주는 세 자리 숫자.

    |상태 코드 값|의미|
    |-----|----------------------|
    |2xx|성공 - 서버가 요청을 처리했음을 전달|
    |3xx|리다이렉트 - 다른 URI로 다시 요청|
    |4xx|클라이언트 에러 - 요청에 문제|
    |5xx|서버 에러 - 서버 쪽에 문제|

- 애플리케이션은 보통 하나의 작업을 수행하기 위해 여러 HTTP 트랜잭션을 수행함.

### 메시지

- 단순한 줄 단위의 문자열. 요청/응답 메시지
    - 시작줄 : 어떤 요청/응답인지 나타냄.
    - 헤더 : 쉬운 구문분석을 위해 콜론(:)으로 구분되어 있는 하나의 이름과 값으로 구성됨.
        - 헤더는 빈 줄로 끝남.
    - 본문 : 빈 줄 다음에는 어떤 종류의 데이터든 들어갈 수 있는 메시지 본문이 필요에 따라 올 수 있음.
        - 요청 본문은 웹 서버로 데이터를 실어 보내며, 응답 본문은 클라이언트로 데이터를 반환함.
        - 문자열이며 구조적인 시작줄이나 헤더와 달리, 본문은 임의의 이진 데이터를 포함할 수 있음. (이미지, 비디오, 오디오 트랙, 응용 소프트웨어, 텍스트 등)

### TCP 커넥션

- TCP는 TCP와 IP가 층을 이루는 패킷 교환 네트워크 프로토콜의 집합으로 대중적이고 신뢰성 있는 프로토콜임.
- TCP 커넥션이 맺어지면 클라이언트와 서버 컴퓨터 간에 교환되는 메시지가 없어지거나, 손상되거나, 순서가 뒤바뀌어 수신되는 일은 없음.
- HTTP 프로토콜은 TCP의 위의 계층으로 자신의 메시지 데이터를 전송하기 위해 TCP를 사용함.
- HTTP 클라이언트가 서버에 메시지를 전송할 수 있게 되기 전에, 인터넷 프로토콜(IP) 주소와 포트번호를 사용해 클라이언트와 서버 사이에 TCP/IP 커넥션을 맺어야 함.

### 프로토콜 버전

- HTTP/0.9 : 오직 GET 메서드만 지원하고 멀티미디어 콘텐츠에 대한 MIME 타입이나 HTTP 헤더, 버전 번호는 지원하지 않음.
- HTTP/1.0 : 버전번호, HTTP 헤더, 추가 메서드, 멀티미디어 객체, POST, HEAD 메서드 추가됨.
- HTTP/1.1 : 현재의 HTTP 버전, OPTIONS, PUT, DELETE, TRACE 메서드 추가됨.
- HTTP/2.0

### 웹의 구성요소

- 프락시
    - HTTP 프락시 서버 : 웹 보안, 애플리케이션 통합, 성능 최적화를 위한 중요한 구성요소.
    - 주로 보안을 위해 사용되며 요청과 응답을 필터링함.
- 웹캐시와 캐시 프락시는 자신을 거쳐 가는 문서들 중 자주 찾는 것의 사본을 저장해두는 특별한 종류의 HTTP 프락시 서버.
- 게이트 웨이 : 다른 서버들의 중개자로 도악하는 특별한 서버로 주로 HTTP 트래픽을 다른 프로토콜로 변환하기 위해 사용됨.
- 터널 : 단순 HTTP 통신을 전달하기만 하는 HTTP 애플리케이션으로 주로 비 HTTP 데이터를 하나 이상의 HTTP 연결을 통해 그대로 전송해주기 위해 사용됨.
- 에이전트 : 사용자를 위해 HTTP 요청을 만들어주는 클라이언트 프로그램.